<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Job portal</title>
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
      integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="./assests/css/style.css" />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-transparent fixed-top">
      <a class="navbar-brand" href="#">
        <img src="./assests/images/logo.png" alt="Logo" class="navbar-logo" />
      </a>
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link text-white" href="#about">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white" href="#services">Services</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white" href="#footer">Contact</a>
          </li>
        </ul>
      </div>
      <div class="ml-auto">
        <button class="btn btn-outline-primary mr-2" id="loginBtn">
          Login
        </button>
        <button class="btn btn-outline-success" id="registerBtn">
          Register
        </button>
      </div>
    </nav>

    <div id="form-background-section">
      <section
        class="hero-section text-center text-white d-flex align-items-center centered-text"
      >
        <div class="container">
          <h1>Unlock Your Career Potential</h1>
          <p>Connecting talented professionals with leading employers.</p>
          <div class="d-flex justify-content-center">
            <a
              href="jobseeker-dashboard.html"
              class="btn btn-primary m-2"
              target="_blank"
              >Find Jobs</a
            >
            <a
              href="company-dashboard.html"
              class="btn btn-secondary m-2"
              target="_blank"
              >Post a Job</a
            >
          </div>
        </div>
      </section>

      <div id="login-section" class="d-none animate__animated">
        <button type="button" class="close" id="closeLoginForm">&times;</button>
        <h2 class="text-center">Login</h2>
        <form id="login-form">
          <div class="form-group">
            <label for="login-email">Email address</label>
            <input
              type="email"
              class="form-control"
              id="login-email"
              placeholder="Enter email"
              required
            />
          </div>
          <div class="form-group">
            <label for="login-password">Password</label>
            <input
              type="password"
              class="form-control"
              id="login-password"
              placeholder="Password"
              required
            />
          </div>
          <button type="submit" class="btn btn-primary btn-block">Login</button>
        </form>
        <p class="text-center mt-3">
          Don't have an account?
          <a href="#" id="show-register-form">Register here</a>
        </p>
      </div>

      <div id="register-section" class="d-none animate__animated">
        <button type="button" class="close" id="closeRegisterForm">
          &times;
        </button>
        <h2 class="text-center">Register</h2>
        <form id="register-form">
          <div class="form-group">
            <label for="register-email">Email address</label>
            <input
              type="email"
              class="form-control"
              id="register-email"
              placeholder="Enter email"
              required
            />
          </div>
          <div class="form-group">
            <label for="register-password">Password</label>
            <input
              type="password"
              class="form-control"
              id="register-password"
              placeholder="Password"
              required
            />
          </div>
          <div class="form-group">
            <label for="register-role">Role</label>
            <select class="form-control" id="register-role" required>
              <option value="company">Company</option>
              <option value="jobseeker">Job Seeker</option>
            </select>
          </div>
          <button type="submit" class="btn btn-success btn-block">
            Register
          </button>
        </form>
        <p class="text-center mt-3">
          Already have an account?
          <a href="#" id="show-login-form">Login here</a>
        </p>
      </div>
    </div>

    <div class="container-xxl py-5">
      <div class="container">
        <div class="row g-5 align-items-center">
          <div class="col-lg-6 wow fadeIn" data-wow-delay="0.1s">
            <div class="row g-0 about-bg rounded overflow-hidden">
              <div class="col-6 text-start">
                <img
                  class="img-fluid w-100"
                  src="./assests/images/about-1.jpg"
                />
              </div>
              <div class="col-6 text-start">
                <img
                  class="img-fluid"
                  src="./assests/images/about-2.jpg"
                  style="width: 85%; margin-top: 15%"
                />
              </div>
              <div class="col-6 text-end">
                <img
                  class="img-fluid"
                  src="./assests/images/about-3.jpg"
                  style="width: 85%"
                />
              </div>
              <div class="col-6 text-end">
                <img
                  class="img-fluid w-100"
                  src="./assests/images/about-4.jpg"
                />
              </div>
            </div>
          </div>
          <div class="col-lg-6 wow fadeIn" data-wow-delay="0.5s">
            <h1 class="mb-4">
              Connecting Top Talent with Leading Opportunities
            </h1>
            <p class="mb-4">
              Discover your next career move or find the perfect candidate with
              our innovative job portal. We offer a streamlined process to match
              job seekers with their ideal positions and employers with top
              talent. Whether you're looking for your dream job or searching for
              the right fit for your company, we're here to help you succeed.
            </p>
            <p>
              <i class="fa fa-check text-primary me-3"></i>Find your dream job
              with ease
            </p>
            <p>
              <i class="fa fa-check text-primary me-3"></i>Connect with top
              employers
            </p>
            <p>
              <i class="fa fa-check text-primary me-3"></i>Access a broad range
              of job listings
            </p>
            <a
              class="btn btn-primary py-3 px-5 mt-3"
              href="jobseeker-dashboard.html"
              target="_blank"
              >Explore Opportunities</a
            >
          </div>
        </div>
      </div>
    </div>

    <footer class="site-footer">
      <a href="#top" class="smoothscroll scroll-top">
        <span class="icon-keyboard_arrow_up">
          <i class="fa-solid fa-arrow-up" style="color: #007bff"></i>
        </span>
      </a>

      <div class="container">
        <div class="row mb-5">
          <div class="col-6 col-md-3 mb-4 mb-md-0">
            <h3>Search Trending</h3>
            <ul class="list-unstyled">
              <li><a href="#">Web Design</a></li>
              <li><a href="#">Graphic Design</a></li>
              <li><a href="#">Web Developers</a></li>
              <li><a href="#">Python</a></li>
              <li><a href="#">HTML5</a></li>
              <li><a href="#">CSS3</a></li>
            </ul>
          </div>
          <div class="col-6 col-md-3 mb-4 mb-md-0">
            <h3>Company</h3>
            <ul class="list-unstyled">
              <li><a href="#">About Us</a></li>
              <li><a href="#">Career</a></li>
              <li><a href="#">Blog</a></li>
              <li><a href="#">Resources</a></li>
            </ul>
          </div>
          <div class="col-6 col-md-3 mb-4 mb-md-0">
            <h3>Support</h3>
            <ul class="list-unstyled">
              <li><a href="#">Support</a></li>
              <li><a href="#">Privacy</a></li>
              <li><a href="#">Terms of Service</a></li>
            </ul>
          </div>
          <div class="col-6 col-md-3 mb-4 mb-md-0">
            <h3>Contact Us</h3>
            <div class="footer-social">
              <a href="#"
                ><span class="icon-facebook"
                  ><i class="fa-brands fa-facebook"></i> </span
              ></a>
              <a href="#"
                ><span class="icon-twitter"
                  ><i class="fa-brands fa-x-twitter"></i></span
              ></a>
              <a href="#"
                ><span class="icon-instagram"
                  ><i class="fa-brands fa-instagram"></i></span
              ></a>
              <a href="#"
                ><span class="icon-linkedin"
                  ><i class="fa-brands fa-linkedin"></i></span
              ></a>
            </div>
          </div>
        </div>

        <div class="row text-center">
          <div class="col-12">
            <p class="copyright">
              <small>
                Copyright &copy;
                <script>
                  document.write(new Date().getFullYear());
                </script>
                All rights reserved | This template is made with
                <i class="icon-heart text-danger" aria-hidden="true"></i> by All
                rights reserved | This template is made with
                <i class="icon-heart text-danger" aria-hidden="true"></i>
                by Eng / Mohamed Hamdy
              </small>
            </p>
          </div>
        </div>
      </div>
    </footer>
    <!-- Firebase and jQuery Scripts -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.4.0/firebase-app.js";
      import {
        getAuth,
        createUserWithEmailAndPassword,
        signInWithEmailAndPassword,
      } from "https://www.gstatic.com/firebasejs/9.4.0/firebase-auth.js";
      import {
        getDatabase,
        ref,
        set,
        get,
      } from "https://www.gstatic.com/firebasejs/9.4.0/firebase-database.js";

      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyDAM2-V50uDYvnKgL-Y8XOT_51v743nitM",
        authDomain: "job-portal-9514a.firebaseapp.com",
        projectId: "job-portal-9514a",
        storageBucket: "job-portal-9514a.appspot.com",
        messagingSenderId: "277570197878",
        appId: "1:277570197878:web:f37d7fafc024c14c6d0257",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth();
      const database = getDatabase(app);

      // Register form submission
      document
        .getElementById("register-form")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const email = document.getElementById("register-email").value;
          const password = document.getElementById("register-password").value;
          const role = document.getElementById("register-role").value;

          createUserWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
              const user = userCredential.user;

              // Save user data to Firebase Realtime Database
              set(ref(database, "users/" + user.uid), {
                email: email,
                password: password,
                role: role,
              })
                .then(() => {
                  alert("User registered and data saved successfully!");
                  // Clear the form fields
                  document.getElementById("register-form").reset();
                  // Hide the registration form and show the login form
                  document
                    .getElementById("register-section")
                    .classList.add("d-none");
                  document
                    .getElementById("login-section")
                    .classList.remove("d-none");
                })
                .catch((error) => {
                  alert("Error saving user data: " + error.message);
                });
            })
            .catch((error) => {
              const errorCode = error.code;
              const errorMessage = error.message;
              alert(errorMessage);
            });
        });

      // Login form submission
      document
        .getElementById("login-form")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const email = document.getElementById("login-email").value;
          const password = document.getElementById("login-password").value;

          signInWithEmailAndPassword(auth, email, password)
            .then(async (userCredential) => {
              const user = userCredential.user;

              // Get user data from Firebase Realtime Database
              const userRef = ref(database, "users/" + user.uid);
              const snapshot = await get(userRef);

              if (snapshot.exists()) {
                const userData = snapshot.val();
                const role = userData.role;

                // Redirect based on the user's role
                if (role === "company") {
                  window.location.href = "company-dashboard.html";
                } else if (role === "jobseeker") {
                  window.location.href = "jobseeker-dashboard.html";
                } else {
                  alert("Role not recognized.");
                }
              } else {
                alert("No user data found.");
              }
            })
            .catch((error) => {
              const errorCode = error.code;
              const errorMessage = error.message;
              alert(errorMessage);
            });
        });

      // Toggle between login and registration forms
      document
        .getElementById("show-register-form")
        .addEventListener("click", function () {
          document.getElementById("login-section").classList.add("d-none");
          document
            .getElementById("register-section")
            .classList.remove("d-none");
        });

      document
        .getElementById("show-login-form")
        .addEventListener("click", function () {
          document.getElementById("register-section").classList.add("d-none");
          document.getElementById("login-section").classList.remove("d-none");
        });

      // Show Login Form
      document
        .getElementById("loginBtn")
        .addEventListener("click", function () {
          document.getElementById("register-section").classList.add("d-none");
          document.getElementById("login-section").classList.remove("d-none");
        });

      // Show Register Form
      document
        .getElementById("registerBtn")
        .addEventListener("click", function () {
          document.getElementById("login-section").classList.add("d-none");
          document
            .getElementById("register-section")
            .classList.remove("d-none");
        });

      // Close Login Form
      document
        .getElementById("closeLoginForm")
        .addEventListener("click", function () {
          document.getElementById("login-section").classList.add("d-none");
        });

      // Close Register Form
      document
        .getElementById("closeRegisterForm")
        .addEventListener("click", function () {
          document.getElementById("register-section").classList.add("d-none");
        });
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="./assests/js/app.js"></script>
  </body>
</html>
